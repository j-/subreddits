define(["require","ok","jquery"],function(e){var t=e("ok"),n=e("jquery"),r=t.Controller.extend({scrollElement:window,scrollThreshold:200,resumeDelay:0,canTrigger:!0,init:function(e){_.bindAll(this,"handleScroll"),_.extend(this,_.pick(e,"scrollElement","scrollThreshold","resumeDelay")),this.$scrollElement=n(this.scrollElement)},pause:function(){this.canTrigger=!1,this.trigger("bottom")},resume:function(){this.canTrigger=!0;var e=this;setTimeout(function(){e.testScroll()},this.resumeDelay)},getScrollTop:function(){return this.$scrollElement.scrollTop()},getScrollHeight:function(){return document.body.scrollHeight},getScrollBottom:function(){return this.getScrollTop()+this.scrollElement.innerHeight},isCloseToBottom:function(){var e=this.getScrollHeight(),t=this.getScrollBottom(),n=this.scrollThreshold;return e-t<n},testScroll:function(){this.canTrigger&&this.isCloseToBottom()&&this.pause()},handleScroll:function(){this.testScroll()},start:function(){this.$scrollElement.on("scroll",this.handleScroll)},stop:function(){this.$scrollElement.off("scroll",this.handleScroll)}});return r});