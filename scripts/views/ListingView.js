define(["require","ok","ok.views","jquery","models/CommentModel","views/FullCommentView","models/LinkModel","views/LinkView"],function(e){var t=e("ok");e("ok.views");var n=e("jquery"),r=e("models/CommentModel"),i=e("views/FullCommentView"),s=e("models/LinkModel"),o=e("views/LinkView"),u=t.CollectionView.extend({init:function(){this.expanded=!1},getConstructor:function(e){if(e instanceof r)return i;if(e instanceof s)return o;throw new Error("Unrecognised item in listing")},addChildView:function(e){t.CollectionView.prototype.addChildView.apply(this,arguments),n(e.el).addClass("listing-item"),this.expanded&&e.showEmbedded()},expandAll:function(){this.expanded=!0,_.each(this.children,function(e){e.view.showEmbedded()})},collapseAll:function(){this.expanded=!1,_.each(this.children,function(e){e.view.hideEmbedded()})}});return u});