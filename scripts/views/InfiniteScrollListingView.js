define(["require","ok","ok.dollarview","jquery","underscore","views/ListingView","views/EndOfListingView","controllers/InfiniteScrollController"],function(e){var t=e("ok");e("ok.dollarview");var n=e("jquery"),r=e("underscore"),i=e("views/ListingView"),s=e("views/EndOfListingView"),o=e("controllers/InfiniteScrollController"),u=t.$View.extend({init:function(e){r.extend(this,r.pick(e,"controller")),this.listingView=this.addChildView(i,{className:"listing-items",watch:this.watch}),this.endOfListingView=this.addChildView(s,{watch:this.controller.state.getProperty("atEnd")}),this.scrollController=new o,this.listenTo(this.scrollController,"bottom",this.handleBottom)},render:function(){this.empty(),this.renderChildViews(),this.$el.append(this.listingView.el).append(this.endOfListingView.el)},expandAll:function(){this.listingView.expandAll()},collapseAll:function(){this.listingView.collapseAll()},handleBottom:function(){this.trigger("bottom")},resume:function(){this.scrollController.resume()},start:function(){t.$View.prototype.start.call(this),this.scrollController.start()},stop:function(){t.$View.prototype.stop.call(this),this.scrollController.stop()}});return u});