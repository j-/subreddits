define(["require","ok","ok.dollarview","jquery","underscore","text!templates/Header.html"],function(e){var t=e("ok");e("ok.dollarview");var n=e("jquery"),r=e("underscore"),i=e("text!templates/Header.html"),s="active",o={hot:"Hot","new":"New",rising:"Rising",controversial:"Controversial",top:"Top",gilded:"Gilded",ads:"Promoted"},u={hour:"This hour",day:"Today",week:"This week",month:"This month",year:"This year",all:"All"},a=t.$View.extend({className:"listing-controls navbar navbar-default navbar-fixed-top navbar-inverse",init:function(){r.bindAll(this,"handleClickSort","handleClickRefresh","handleClickExpandToggle","handleSubmitSearch"),this.expanded=!1},render:function(){this.$el.html(i)},handleClickSort:function(e){e.preventDefault();var t=n(e.target),r=t.data("sort"),i=t.data("t");this.trigger("sort",r,i),this.$("a[data-sort]").parents("li").removeClass(s),t.parent("li").addClass(s),t.parents(".dropdown-submenu").addClass(s),this.indicateSort(r,i)},handleClickRefresh:function(e){e.preventDefault(),this.trigger("refresh")},handleClickExpandToggle:function(e){e.preventDefault(),this.expanded=!this.expanded,this.expanded?this.expandAll():this.collapseAll()},handleSubmitSearch:function(e){e.preventDefault();var t=this.$(".search"),n=t.val();n&&this.trigger("search",n)},indicateSort:function(e,t){e=o[e];var r=this.$(".sorting-by").empty().text(e);t&&(t=u[t],n.textNode(" ").appendTo(r),n.create("small").text("("+t+")").appendTo(r))},expandAll:function(){this.trigger("expandall"),this.$(".action-expandtoggle .glyphicon").removeClass("glyphicon-plus").addClass("glyphicon-minus"),this.$(".action-expandtoggle .button-text").text("Collapse all")},collapseAll:function(){this.trigger("collapseall"),this.$(".action-expandtoggle .glyphicon").removeClass("glyphicon-minus").addClass("glyphicon-plus"),this.$(".action-expandtoggle .button-text").text("Expand all")},start:function(){this.$el.on("click","a[data-sort]",this.handleClickSort),this.$el.on("click",".action-refresh",this.handleClickRefresh),this.$el.on("click",".action-expandtoggle",this.handleClickExpandToggle),this.$el.on("submit",".search-form",this.handleSubmitSearch)},stop:function(){t.$View.prototype.stop.call(this),this.$el.off("click","a[data-sort]",this.handleClickSort),this.$el.off("click",".action-refresh",this.handleClickRefresh),this.$el.off("click",".action-expandtoggle",this.handleClickExpandToggle),this.$el.off("submit",".search-form",this.handleSubmitSearch)}});return a});