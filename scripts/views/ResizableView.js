define(["require","ok","ok.dollarview","underscore"],function(e){var t=e("ok");e("ok.dollarview");var n=e("underscore"),r=t.$View.extend({className:"resizable",constructor:function(e){t.$View.apply(this,arguments),n.bindAll(this,"handleClick","handleMouseMove","handleMouseDown","handleMouseUp"),this.didMove=!1,this.offsetLeft=null,this.offsetTop=null,this.beginDistance=null},calculateDistance:function(e,t){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2))},handleMouseDown:function(e){e.preventDefault();var t=this.$el.offset();this.offsetLeft=t.left-document.body.scrollLeft,this.offsetTop=t.top-document.body.scrollTop;var n=e.screenX,r=e.screenY,i=n-this.offsetLeft,s=r-this.offsetTop;this.beginDistance=this.calculateDistance(i,s),this.startResizing(),$(window).on("mousemove",this.handleMouseMove),$(window).one("mouseup",this.handleMouseUp)},handleMouseMove:function(e){var t=e.screenX,n=e.screenY,r=t-this.offsetLeft,i=n-this.offsetTop,s=this.calculateDistance(r,i),o=s/this.beginDistance;this.resize(o)},handleMouseUp:function(){this.stopResizing(),$(window).off("mousemove",this.handleMouseMove)},handleClick:function(e){this.didMove&&e.preventDefault()},startResizing:function(){this.didMove=!1,this.originalWidth=this.$el.width(),this.$el.width(this.$el.width())},resize:function(e){this.didMove=!0,this.$el.width(this.originalWidth*e)},stopResizing:function(){},start:function(){t.$View.prototype.start.call(this),this.$el.on("mousedown",this.handleMouseDown),this.$el.on("click",this.handleClick)},stop:function(){t.$View.prototype.stop.call(this),this.$el.off("mousedown",this.handleMouseDown),this.$el.off("click",this.handleClick)}});return r});